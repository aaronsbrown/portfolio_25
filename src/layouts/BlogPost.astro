---
import Base from './Base.astro';
import Header from '../components/Header.astro';

export interface Props {
  frontmatter: {
    title: string;
    date: Date;
    excerpt?: string;
    tags?: string[];
  };
}

const { frontmatter } = Astro.props;
const readingTime = Math.ceil(Astro.props.rawContent?.split(' ').length / 200) || 5;
---

<Base title={`${frontmatter.title} - Aaron Steele Brown`} description={frontmatter.excerpt}>
  <Header />
  
  <main class="pt-16">
    <article class="max-w-3xl mx-auto px-4 py-16">
      <header class="mb-12">
        <div class="mb-6">
          <time class="font-mono text-sm uppercase tracking-wide text-gray-500 dark:text-gray-500">
            {frontmatter.date.toLocaleDateString('en-US', { 
              year: 'numeric', 
              month: 'long', 
              day: 'numeric' 
            })}
          </time>
          <span class="mx-2 text-gray-400">•</span>
          <span class="font-mono text-sm uppercase tracking-wide text-gray-500 dark:text-gray-500">
            {readingTime} min read
          </span>
        </div>
        
        <h1 class="font-mono text-4xl md:text-5xl font-bold leading-tight mb-6">
          {frontmatter.title}
        </h1>
        
        {frontmatter.tags && (
          <div class="flex flex-wrap gap-2">
            {frontmatter.tags.map((tag) => (
              <span class="font-mono text-xs uppercase tracking-wide px-3 py-1 bg-gray-100 dark:bg-gray-900 text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-gray-800">
                {tag}
              </span>
            ))}
          </div>
        )}
      </header>
      
      <div class="prose prose-lg max-w-none dark:prose-invert
                  prose-headings:font-mono prose-headings:font-bold prose-headings:uppercase prose-headings:tracking-wide
                  prose-h2:text-2xl prose-h3:text-xl
                  prose-p:leading-relaxed prose-p:text-gray-700 dark:prose-p:text-gray-300
                  prose-li:text-gray-700 dark:prose-li:text-gray-300
                  prose-code:bg-gray-100 dark:prose-code:bg-gray-900 
                  prose-code:px-1 prose-code:py-0.5 prose-code:rounded
                  prose-pre:bg-gray-900 dark:prose-pre:bg-gray-100
                  prose-a:text-pink-500 hover:prose-a:text-pink-600
                  prose-blockquote:border-l-pink-500">
        <slot />
      </div>
      
      <footer class="mt-16 pt-8 border-t border-gray-200 dark:border-gray-800">
        <div class="flex justify-between items-center">
          <a href="/blog" class="font-mono text-sm uppercase tracking-wide hover:text-pink-500 transition-colors">
            ← Back to Journal
          </a>
          
          <div class="flex space-x-4">
            <button onclick="navigator.share && navigator.share({title: document.title, url: window.location.href})" 
                    class="font-mono text-sm uppercase tracking-wide hover:text-pink-500 transition-colors">
              Share
            </button>
          </div>
        </div>
      </footer>
    </article>
  </main>
</Base>